(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,n){},30:function(e,t,n){e.exports=n.p+"static/media/Equipment.e108aeb5.png"},33:function(e,t,n){e.exports=n(48)},38:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),r=n(15),c=n.n(r),u=(n(38),n(5)),l=n.n(u),o=n(14),m=n(8),s=n(9),p=n(11),h=n(10),d=n(12),E=(n(25),n(3)),f=n(49),v=n(52),b=n(26),q=new(function(){function e(){Object(m.a)(this,e),this.auth0=new b.a.WebAuth({domain:"gordianknots.auth0.com",audience:"https://gordianknots.auth0.com/userinfo",clientID:"XsDHvnpcFQa2JGoeCFmPrD0v7IUI7iJG",redirectUri:"https://ics370-equipment.herokuapp.com/callback",responseType:"id_token",scope:"openid profile"}),this.getProfile=this.getProfile.bind(this),this.handleAuthentication=this.handleAuthentication.bind(this),this.isAuthenticated=this.isAuthenticated.bind(this),this.signIn=this.signIn.bind(this),this.signOut=this.signOut.bind(this)}return Object(s.a)(e,[{key:"getProfile",value:function(){return this.profile}},{key:"getIdToken",value:function(){return this.idToken}},{key:"isAuthenticated",value:function(){return(new Date).getTime()<this.expiresAt}},{key:"signIn",value:function(){this.auth0.authorize()}},{key:"handleAuthentication",value:function(){var e=this;return new Promise(function(t,n){e.auth0.parseHash(function(a,i){return a?n(a):i&&i.idToken?(e.setSession(i),void t()):n(a)})})}},{key:"setSession",value:function(e){this.idToken=e.idToken,this.profile=e.idTokenPayload,this.expiresAt=1e3*e.idTokenPayload.exp}},{key:"signOut",value:function(){this.auth0.logout({returnTo:"https://ics370-equipment.herokuapp.com:3000",clientID:"XsDHvnpcFQa2JGoeCFmPrD0v7IUI7iJG"})}},{key:"silentAuth",value:function(){var e=this;return new Promise(function(t,n){e.auth0.checkSession({},function(a,i){if(a)return n(a);e.setSession(i),t()})})}}]),e}());var w=Object(v.a)(function(e){return i.a.createElement(E.l,{color:"faded",light:!0,expand:"md"},i.a.createElement(E.k,{className:"navbar navbar-dark bg-dark fixed-top"},i.a.createElement(E.n,{nav:!0,inNavbar:!0},i.a.createElement(E.f,{nav:!0,caret:!0},"Menu"),i.a.createElement(E.e,{left:!0},i.a.createElement(E.d,{tag:f.a,to:"/"},"Home"),i.a.createElement(E.d,{divider:!0}),i.a.createElement(E.d,{tag:f.a,to:"/equipment"},"Manage Equipment"),i.a.createElement(E.d,{divider:!0}),i.a.createElement(E.d,{divider:!0}),i.a.createElement(E.d,{tag:"a",href:"https://github.com/stuvwxyz/equipment-ui"},"GitHub UI"),i.a.createElement(E.d,{tag:"a",href:"https://github.com/stuvwxyz/equipment-api"},"GitHub API"))),!q.isAuthenticated()&&i.a.createElement("button",{className:"btn btn-dark",onClick:q.signIn},"Sign In"),q.isAuthenticated()&&i.a.createElement("div",null,i.a.createElement("label",{className:"mr-2 text-white"},q.getProfile().name),i.a.createElement("button",{className:"btn btn-dark",onClick:function(){q.signOut(),e.history.replace("/")}},"Sign Out"))))}),O=n(30),g=n.n(O),y=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(w,null),i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},i.a.createElement("img",{src:g.a,className:"App-logo",alt:"homeImage"}),i.a.createElement(E.c,{fluid:!0},i.a.createElement(E.a,{color:"link"},i.a.createElement(f.a,{to:"/equipment"},"Manage Equipment"))))))}}]),t}(a.Component),k=n(51),j=n(53),C=n(50),x=n(31),A=n(13),S=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={equipment:[],isLoading:!0},n.remove=n.remove.bind(Object(A.a)(Object(A.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),fetch("/api/equipment").then(function(e){return e.json()}).then(function(t){return e.setState({equipment:t,isLoading:!1})})}},{key:"remove",value:function(){var e=Object(o.a)(l.a.mark(function e(t){var n=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/equipment/".concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(){var e=Object(x.a)(n.state.equipment).filter(function(e){return e.id!==t});n.setState({equipment:e})});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(!q.isAuthenticated())return null;var t=this.state,n=t.equipment;if(t.isLoading)return i.a.createElement("p",null,"Loading...");var a=n.map(function(t){return i.a.createElement("tr",{key:t.id},i.a.createElement("td",null,i.a.createElement(E.b,{className:"float-left"},i.a.createElement(E.a,{size:"sm",color:"primary",tag:f.a,to:"/equipmentedit/"+t.equipmentId},"Update"))),i.a.createElement("td",{style:{whiteSpace:"nowrap"}},t.equipmentName),i.a.createElement("td",{style:{whiteSpace:"nowrap"}},t.equipmentAvailable),i.a.createElement("td",{style:{whiteSpace:"nowrap"}},t.equipmentCost),i.a.createElement("td",{style:{whiteSpace:"nowrap"}},t.equipmentDescription),i.a.createElement("td",{style:{whiteSpace:"nowrap"}},t.equipmentOwner),i.a.createElement("td",{style:{whiteSpace:"nowrap"}},t.equipmentOwnerPhone),i.a.createElement("td",{style:{whiteSpace:"nowrap"}},t.equipmentOwnerEmail),i.a.createElement("td",null,i.a.createElement(E.b,{className:"float-right"},i.a.createElement(E.a,{size:"sm",color:"danger",onClick:function(){return e.remove(t.equipmentId)}},"Remove"))))});return i.a.createElement("div",null,i.a.createElement(w,null),i.a.createElement(E.c,{fluid:!0},i.a.createElement("div",{className:"float-right"},i.a.createElement(E.a,{color:"success",tag:f.a,to:"/equipmentedit/new"},"Add Equipment")),i.a.createElement("h3",null,"Equipment List"),i.a.createElement(E.m,{className:"mt-4"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{width:"10%"},"Update"),i.a.createElement("th",{width:"10%"},"Item"),i.a.createElement("th",{width:"10%"},"Available"),i.a.createElement("th",{width:"15%"},"Rental Cost"),i.a.createElement("th",{width:"20%"},"Description"),i.a.createElement("th",{width:"15%"},"Owner"),i.a.createElement("th",{width:"10%"},"Owner Phone"),i.a.createElement("th",{width:"15%"},"Owner Email"),i.a.createElement("th",{width:"10%"},"Remove"))),i.a.createElement("tbody",null,a))))}}]),t}(a.Component),D=Object(v.a)(S),I=n(32),N=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).emptyItem={equipmentName:"",equipmentAvailable:"",equipmentCost:"",equipmentDescription:"",equipmentOwner:"",equipmentOwnerPhone:"",equipmentOwnerEmail:""},n.state={item:n.emptyItem},n.handleChange=n.handleChange.bind(Object(A.a)(Object(A.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(A.a)(Object(A.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("new"===this.props.match.params.id){e.next=7;break}return e.next=3,fetch("/api/equipment/".concat(this.props.match.params.id));case 3:return e.next=5,e.sent.json();case 5:t=e.sent,this.setState({item:t});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){var t=e.target,n=t.value,a=t.name,i=Object(I.a)({},this.state.item);i[a]=n,this.setState({item:i})}},{key:"handleSubmit",value:function(){var e=Object(o.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=this.state.item,e.next=4,fetch("/api/equipment",{method:n.id?"PUT":"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)});case 4:this.props.history.push("/equipment");case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){if(!q.isAuthenticated())return null;var e=this.state.item,t=i.a.createElement("h2",null,e.id?"Edit Equipment":"Add Equipment");return i.a.createElement("div",null,i.a.createElement(w,null),i.a.createElement(E.c,null,t,i.a.createElement(E.g,{onSubmit:this.handleSubmit},i.a.createElement(E.h,null,i.a.createElement(E.j,{for:"equipmentName"},"equipmentName"),i.a.createElement(E.i,{type:"text",name:"equipmentName",id:"equipmentName",value:e.equipmentName||"",onChange:this.handleChange,autoComplete:"equipmentName"})),i.a.createElement(E.h,null,i.a.createElement(E.j,{for:"equipmentAvailable"},"equipmentAvailable"),i.a.createElement(E.i,{type:"boolean",name:"equipmentAvailable",id:"equipmentAvailable",value:e.equipmentAvailable||"",onChange:this.handleChange,autoComplete:"equipmentAvailable"})),i.a.createElement(E.h,null,i.a.createElement(E.j,{for:"equipmentCost"},"equipmentCost"),i.a.createElement(E.i,{type:"text",name:"equipmentCost",id:"equipmentCost",value:e.equipmentCost||"",onChange:this.handleChange,autoComplete:"equipmentCost"})),i.a.createElement(E.h,null,i.a.createElement(E.j,{for:"equipmentDescription"},"equipmentDescription"),i.a.createElement(E.i,{type:"text",name:"equipmentDescription",id:"equipmentDescription",value:e.equipmentDescription||"",onChange:this.handleChange,autoComplete:"equipmentDescription"})),i.a.createElement(E.h,null,i.a.createElement(E.j,{for:"equipmentOwner"},"equipmentOwner"),i.a.createElement(E.i,{type:"text",name:"equipmentOwner",id:"equipmentOwner",value:e.equipmentOwner||"",onChange:this.handleChange,autoComplete:"equipmentOwner"})),i.a.createElement(E.h,null,i.a.createElement(E.j,{for:"equipmentOwnerPhone"},"equipmentOwnerPhone"),i.a.createElement(E.i,{type:"text",name:"equipmentOwnerPhone",id:"equipmentOwnerPhone",value:e.equipmentOwnerPhone||"",onChange:this.handleChange,autoComplete:"equipmentOwnerPhone"})),i.a.createElement(E.h,null,i.a.createElement(E.j,{for:"equipmentOwnerEmail"},"equipmentOwnerEmail"),i.a.createElement(E.i,{type:"text",name:"equipmentOwnerEmail",id:"equipmentOwnerEmail",value:e.equipmentOwnerEmail||"",onChange:this.handleChange,autoComplete:"equipmentOwnerEmail"})),i.a.createElement(E.h,null,i.a.createElement(E.a,{color:"primary",type:"submit"},"Save")," ",i.a.createElement(E.a,{color:"secondary",tag:f.a,to:"/equipment"},"Cancel")))))}}]),t}(a.Component),P=Object(v.a)(N),T=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.handleAuthentication();case 2:this.props.history.replace("/");case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return i.a.createElement("p",null,"Loading profile...")}}]),t}(a.Component),L=Object(v.a)(T);var U=function(e){var t=e.component,n=e.path,a=e.checkingSession;return i.a.createElement(C.a,{path:n,render:function(){return a?i.a.createElement("h3",{className:"text-center"},"Validating session..."):q.isAuthenticated()?i.a.createElement(t,null):(q.signIn(),i.a.createElement("div",null))}})},J=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("/callback"!==this.props.location.pathname){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,q.silentAuth();case 5:this.forceUpdate(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),"login_required"!==e.t0.error&&console.log(e.t0.error);case 11:case"end":return e.stop()}},e,this,[[2,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return i.a.createElement(k.a,null,i.a.createElement(j.a,null,i.a.createElement(C.a,{path:"/",exact:!0,component:y}),i.a.createElement(U,{path:"/equipment",exact:!0,component:D}),i.a.createElement(U,{path:"/equipmentedit/:id",component:P}),i.a.createElement(C.a,{exact:!0,path:"/callback",component:L})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(46);c.a.render(i.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,2,1]]]);
//# sourceMappingURL=main.49fe0247.chunk.js.map